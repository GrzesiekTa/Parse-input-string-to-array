<?php

declare(strict_types=1);
include dirname(__FILE__) . '/../src/TagRecognizer.php';

use PHPUnit\Framework\TestCase;

final class TagRecognizerTest extends TestCase {

    /**
     * 
     * @dataProvider dataProvider
     */
    public function testTagRecognizer($expect, $string) {
        $result = new TagRecognizer($string);
        $result = $result->getParseTags();

        return $this->assertEquals($expect, $result);
    }

    public function dataProvider() {
        return [
            [
                [
                    'value' => 'asdasd',
                    'type' => 'text',
                    'name' => 'imie',
                    'placeholder' => '',
                    'class' => '',
                    'style' => '',
                    'validators' => [
                        'onlyNumbers' => '',
                        'min' => '3',
                        'max' => '128'
                    ],
                    'items' => [
                        1 => 'aaa',
                        2 => 'bbb'
                    ]
                ],
                '[ input value="asdasd" type="text" name="imie" placeholder="" class="" style="" validators="onlyNumbers, min(3), max(128)" items="1|aaa# 2|bbb"      ]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'value' => '12323435',
                    'type' => 'integer',
                    'name' => 'example name',
                    'placeholder' => 'example placeholder',
                    'class' => 'form-controll'
                ],
                '[ input value="12323435" type="integer" name="example name" placeholder="example placeholder" class="form-controll" ]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'type' => 'hidden',
                    'id' => 'container',
                    'placeholder' => 'bummmmmm',
                    'class' => 'form-custom',
                    'validators' => [
                        'example' => '',
                        'email' => '',
                        'phone' => '',
                        'lenght' => '200'
                    ],
                ],
                '[ input type="hidden" id="container"  placeholder="bummmmmm" class="form-custom" validators="example, email, phone, lenght(200)" ]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'type' => 'date',
                    'id' => 'data_container',
                    'placeholder' => '2019-01-01',
                    'class' => 'date-custom',
                    'exampleTag' => 'lorem ipsum',
                    'items' => [
                        1 => 'one',
                        2 => 'two',
                        3 => 'three'
                    ],
                    'validators' => [
                        'date' => '',
                        'lenght' => '202'
                    ],
                ],
                '[ input type="date" id="data_container"  placeholder="2019-01-01" class="date-custom" exampleTag="lorem ipsum" items="1|one# 2|two# 3|three" validators="date, lenght(202)" ]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'name' => 'example_name_value',
                    'otherTag' => 'example_value',
                    'id' => 'my-id',
                    'class' => 'my_amazing_class',
                ],
                '[input name="example_name_value" otherTag="example_value" id="my-id" class="my_amazing_class"]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'name' => 'example_name_value',
                    'otherTag' => 'example_value',
                    'id' => 'my-id',
                    'class' => 'my_amazing_class',
                    'validators' => [
                        'custom_validator' => '',
                        'lenght' => '18',
                        'other_validator' => '',
                        'expectedValue' => '12',
                    ]
                ],
                '[input    name="example_name_value"   otherTag="example_value"   id="my-id"   class="my_amazing_class"   validators="custom_validator, lenght(18), other_validator, expectedValue(12)"]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [],
                '[    ]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [],
                ''
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [],
                '[input]'
            ],
            //==========================================================================================================================================================
            //==========================================================================================================================================================
            [
                [
                    'name' => 'example_name_value',
                    'otherTag' => 'example_value',
                    'id' => 'my-id',
                    'validators' => [
                        'required' => '',
                    ]
                ],
                '[input name="example_name_value" otherTag="example_value" id="my-id" validators="required"]'
            ],
                //==========================================================================================================================================================
                //==========================================================================================================================================================
        ];
    }

}
